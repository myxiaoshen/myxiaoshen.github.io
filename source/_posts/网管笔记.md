title: 企业的网管笔记
author: Believe firmly
tags:

  - web技术
  - 笔记
categories: []
date: 2020-03-12 09:28:00
---
实习期间找了一份企业网管管理，业余整理了一些日常经常用到的技能方便后期回顾。虽然经验都是比较低级的但是可以应对日常的电脑与网络问题。我公司是近300人的办公区域配置如下：爱快+LEDE（ikuai主路由lede再虚拟机中做二级转发），下层是可管理千兆交换机，分支是h3c+tp二层交换机、ap与无线控制器、ikvision录像，光纤三条百兆，布线用的依然是大众化的流水布局。以下文章所用到的工具都是基于公司成本考虑过的当然有更好的软件解决方案。这里推荐一个网络配置管理工具[netsim-studio](https://github.com/myxiaoshen/netsim-studio/tree/xs)世面上大部分都是收费的这个是开源的项目上游维护也比较稳定，电脑上ipop,wireshark(easytshrk),easytier，networkmanager都是很好的调试工具可以参考。
ikuai文档地址：https://www.ikuai8.com/zhic/ymgn/lyym.html

###### 快速布局设备清单（更具情况制定我这里是做示范用与快速搭建内网）
0.6类网线8根左右+超5类网线若干--以下是网线科普图
![](https://pic.rmb.bdstatic.com/bjh/56a923d19a6a44e0fb6053aea2c3c975.png)
1.交换机--百：H3-S1224千：H3-S1024 子百：fast24
2.路由器-- CPU：i3-4160  3.60GHz内存: 3793MB 网卡：依照情况定  
3.中心交换--SG1016DT（分流交换机）
4.核心交换--s1820ec（稳定2层交换可3层）
5.可管理交换--水星（MERCURY)SG116D Pro 16口全千兆智能网管交换机
6.ap--小:TP-AC100 大: 小贝 
7.企业级厂商--H3C(经济配置简单易用) 、华为(遥遥领先)、思科(好用但贵配置复杂)

#### 网工术语应用场景
0.0.0.0表示本机上的所有 IPv4 地址，255.255.255.255是广播地址，它作为目标IP表示一个本地网络的广播地址。
1.静态路由：先确定需要连接到的lan口段（指定外网填wan口），然后确定二级路由下的地址与子网（目的地址），最后填写二级路由ip地址（下一跳，设置ip段直通填写0.0.0.0）。这样就可以吧二级路由下的请求通过路由表规则链接到上级路由，依次类推。

2.vlan：VLAN是一种将局域网设备从逻辑上划分成一个个网段，实现每个网段对应一个部门方便管理和避免网络异常引起的网络风暴和攻击，适用于大型的公司与安全有特殊要求的公司（小企业可以使用带vlan隔离的二层傻瓜交换简单一键隔离）。

3.vpn: 端到端，站到端，站到站。常见的vpn链接协议有：L2TP、L2TP、OpenVPN、IPSecVPN

许多软路由自带vpn客户端功能实现异地链接到企业内网办公的需求，还有部分带服务端更方便搭建。

4.NAT：网络地址转换属接入广域网（WAN）技术。 是一种将私有（保留）地址转化为合法IP地址的转换技术，它将广泛应用于各种类型Internet接入方式和各种类型的网络中。原因很简单，NAT不仅完善地解决了IP地址不足的问题。而且还能够有效地避免来自网络外部的攻击，隐藏并保护网络内部的计算机。

5.arp: 地址解析协议，即ARP（Address Resolution Protocol），是根据IP地址获取物理地址的一个TCP/IP协议。主机发送信息时将包含目标IP地址的ARP请求广播到局域网络上的所有主机，并接收返回消息，以此确定目标的物理地址；收到返回消息后将该IP地址和物理地址存入本机ARP缓存中并保留一定时间，下次请求时直接查询ARP缓存以节约资源。

6.Route:路由表的主要工作就是为经过路由器的每个数据包寻找一条最佳的传输路径，并将该数据有效地传送到目的站点。由此可见，选择最佳路径的策略即路由算法是路由器的关键所在。

7.端口汇聚（链路聚合的不同处是他在lan口运作）：端口汇聚功能是将交换机的多个物理端口汇聚在一起形成一个逻辑上的物理端口，同一汇聚组内的xu多条链路则可视为一条逻辑链路。端口汇聚主要有两个作用：带宽叠加、链路备份。

8.端口镜像：端口镜像是一种数据包获取技术，可以实现将一个或几个端口（被镜像端口）的数据包复制到一个特定的端口（镜像端口），通过对收集到的数据包进行分析，可以达到网络监控或排除网络故障的目的。

#### 路由器的软拓展（由主路分发dhcp）
lede基本网络路径： etc/config/network 
1. 使用ikuai自带的虚拟机拓展lede
2. 双软路由  终端>lede>ikuai>pve
3. 双物理机安装，2头使用lan口链接，ikuai做主路由lede旁路由


#### 硬件扫盲

核心交换机-三层交换机：选背板带宽和吞吐量大与端口拓展多的，可管理的二层也行，简化管理可以上带web界面的。
大流量-堆叠交换机：方便机房统一管理增加流量传输效率与端口数量

服务器-防火墙：因为流量会涉及到外联需要保留日志可以考虑上带硬盘插槽的

打印管控-打印控制器：涉密与管控的一种解决方案

集成管理-虚拟化平台：极大程度满足局域网统一业务管理

<!--more-->

#### 认识网络结构

TCP七层架构导图

![image-20251025172452918](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/image-20251025172452918.png)

详细组件解释区分表可以参考下表

| 类别                                                      | 角色/组件 (Role/Component)      | 核心定位/作用 (通俗比喻)                       | 主要工作层级 (OSI)            | 相关主要协议/技术                            |
| --------------------------------------------------------- | ------------------------------- | ---------------------------------------------- | ----------------------------- | -------------------------------------------- |
| **1. 物理与链路层基础设施**<br>(网络的“道路与交通规则”)   | **网卡 (NIC)**                  | **电脑的“嘴巴和耳朵”**                         | 第1层 & 第2层                 | Ethernet, Wi-Fi, MAC地址                     |
|                                                           | **集线器 (Hub)**                | **愚蠢的“大声公/广播喇叭”**                    | **第1层 (物理层)**            | (仅复制电信号)                               |
|                                                           | **交换机 (Switch)**             | **局域网内的“智能交通警察”**                   | **第2层 (数据链路层)**        | Ethernet, ARP, VLANs                         |
|                                                           | **无线接入点 (AP)**             | **Wi-Fi信号的“广播站”**                        | 第1层 & 第2层                 | 802.11 (Wi-Fi), Ethernet                     |
| **2. 互联网核心与路由**<br>(全球网络的“GPS与高速公路”)    | **路由器 (Router)**             | **连接不同网络的“全球邮政系统/导航员”**        | **第3层 (网络层)**            | **IP (IPv4/IPv6)**, ICMP, OSPF, **BGP**, RIP |
|                                                           | **IP协议**                      | **全球统一的“地址编码与信封标准”**             | 第3层 (网络层)                | IP (本身就是协议)                            |
|                                                           | **ICMP协议**                    | **网络世界的“信使/侦察兵” (用于诊断)**         | 第3层 (网络层)                | ICMP (Ping, Traceroute基于此)                |
| **3. 传输与会话管理**<br>(货物的“运输方式”)               | **TCP协议**                     | **“顺丰快递” (可靠、按序、带签收回执)**        | **第4层 (传输层)**            | TCP                                          |
|                                                           | **UDP协议**                     | **“平邮/明信片” (快速、简单，但不保证送达)**   | **第4层 (传输层)**            | UDP                                          |
|                                                           | **QUIC协议**                    | **“下一代智能快递” (基于UDP，更快更高效)**     | 第4层 (逻辑上)，运行在UDP之上 | QUIC                                         |
| **4. 基础网络服务**<br>(互联网的“公共服务设施”)           | **DNS服务器**                   | **互联网的“114电话本/域名翻译官”**             | 第7层 (应用层)                | DNS                                          |
|                                                           | **DHCP服务器**                  | **自动分配IP地址的“网络户籍警/租赁中介”**      | 第7层 (应用层)                | DHCP                                         |
|                                                           | **NTP服务器**                   | **校准所有设备时间的“世界标准时间中心”**       | 第7层 (应用层)                | NTP                                          |
| **5. 应用架构与协议**<br>(数据的“商业模式与语言”)         | **Web服务器 (如Nginx, Apache)** | **网站的“图书馆/资料库”**                      | 第7层 (应用层)                | **HTTP/HTTPS**                               |
|                                                           | **CDN (内容分发网络)**          | **开在用户家门口的“连锁超市/前置仓库”**        | 第7层 (应用层)                | HTTP/HTTPS, DNS (智能解析)                   |
|                                                           | **P2P (对等网络)**              | **人人为我、我为人人的“资源共享集市/百家宴”**  | 第7层 (应用层)                | BitTorrent Protocol, eDonkey                 |
|                                                           | **数据库服务器**                | **应用程序的“核心数据大脑/账本”**              | 第7层 (应用层)                | SQL*Net, TDS (取决于数据库)                  |
|                                                           | **邮件服务器**                  | **处理电子邮件的“专属邮局”**                   | 第7层 (应用层)                | SMTP (发), POP3/IMAP (收)                    |
|                                                           | **API (REST, gRPC)**            | **程序间沟通的“标准化通用语/接口”**            | 第7.层 (应用层)               | HTTP (for REST), HTTP/2 (for gRPC)           |
|                                                           | **WebSocket**                   | **保持长连接的“实时对讲机”**                   | 第7层 (应用层)                | WebSocket                                    |
| **6. 安全、边界与中介**<br>(网络的“安保、代理与门面”)     | **防火墙 (Firewall)**           | **网络边界的“海关/安检门”**                    | 第3/4/7层                     | IP/TCP/UDP (包过滤), HTTP (应用层过滤)       |
|                                                           | **NAT网关**                     | **公司的“前台总机/统一对外号码”**              | 第3/4层                       | NAT (网络地址转换)                           |
|                                                           | **正向代理 (Forward Proxy)**    | **为内部用户服务的“代购/采购员” (隐藏客户端)** | 第7层 (应用层)                | HTTP/HTTPS, SOCKS5                           |
|                                                           | **反向代理 (Reverse Proxy)**    | **保护服务器的“经纪人/保镖” (隐藏服务器)**     | 第7层 (应用层)                | HTTP/HTTPS                                   |
|                                                           | **负载均衡器 (Load Balancer)**  | **餐厅门口“引导顾客到不同餐桌”的服务员**       | 第4层 或 第7层                | TCP/UDP (L4), HTTP/HTTPS (L7)                |
|                                                           | **VPN网关**                     | **进入保密区域的“加密装甲隧道入口”**           | 第3层及以上                   | IPsec, SSL/TLS (OpenVPN)                     |
|                                                           | **API网关**                     | **微服务架构的“总指挥/统一入口”**              | 第7层 (应用层)                | HTTP/HTTPS, REST, gRPC                       |
| **7. 分析、诊断与开发工具**<br>(探索网络的“仪器与工具箱”) | **Wireshark**                   | **网络通信的“X光机/手术级分析仪”**             | **捕获L2, 解析L2-L7**         | (解析所有协议)                               |
|                                                           | **ping (命令)**                 | **回声探测器 (“喂，听得到吗？”)**              | 使用第3层 (ICMP)              | ICMP                                         |
|                                                           | **traceroute / tracert (命令)** | **数据包的“GPS导航轨迹记录仪”**                | 使用第3层 (ICMP)              | ICMP, UDP                                    |
|                                                           | **nslookup / dig (命令)**       | **“电话本”查询工具 (查域名对应的IP)**          | 使用第7层 (DNS)               | DNS                                          |
|                                                           | **curl / Postman**              | **强大的“HTTP请求模拟器/瑞士军刀”**            | 使用第7层 (HTTP/S)            | HTTP/HTTPS                                   |
|                                                           | **netstat / ss (命令)**         | **电脑网络连接的“实时状态监视器”**             | 读取内核的TCP/IP栈信息        | (显示各层协议状态)                           |

#### 局域网的搭建
路由器+交换机的配置路由器提供内网和外网的链接和VLAN（虚拟局域网）的划分，以及各种防火墙和路由功能的配置。而交换机一头连到路由器上，作为一个子网，另一头链接子网中的各台终端。划分几个子网，则从路由连出几台交换机即可。
子网掩码决定了可以分配的dhcp数量可通过站长工具在线计算，也可以通过networkmanager调试工具计算出范围(还有很多小工具)。
![image-20240617143652833](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/image-20240617143652833.png)
LAN口（分配地址用）：合理划分lan口，空闲的可以做LAN扩展绑定减少网卡的负担。笔者原来公司划分2条一条用于有线线路，一条用于无线线路
WAN口（联网用): 更具需求增加拨号带宽，多余的一样可以做vlan划分，或者链路聚合。

 当时不懂图床的重要性乱几把放图片导致很多图片裂了，架构图也丢了这里随便找了个网上的架构图供参考。

![img](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/44a95458cdb949a4e9e17e8961d1544d.png)

#### 特殊办公区域
一般公司的财务和一些稳定的办公区域通常会对网络进行隔离，以免出现特殊情况财务延时转账，网络波动较大以及局域网的网络风暴和arp攻击。以下提供几种解决方案。
一、最简单的一种单独迁入一条宽带。
二、主路由或者三层交换机划分出vlan网段做隔离。
三、可管理交换机或可切换模式的分流型交换机，分配稳定的带宽流量给指定区域。

监控可以直接使用成熟的海康系列磁带机和POE一体的设备设备多再加个poe交换机，不方便上poe的可以加个继电器给网线供15V电压。监控大屏拼接输出：可以根据不同场景使用hdmi切换器或者分配器，画面分割器，

#### 员工终端管控
个人不喜欢微软自带的域管理，它虽然可以和微软系统自带的功能进行无缝对接但是管理起来非常的不方便，因作者原来在微软代理商做过被迫学习。有需要的可以看看网上这些教程还是挺详细的明白域控管理原理就对了。
```
https://zhuanlan.zhihu.com/p/157879429 创建ad域管理名单
https://zhuanlan.zhihu.com/p/162161338 域管理教程
https://blog.csdn.net/lhfeng/article/details/4307432 禁止安装软件
https://www.cnblogs.com/AlexanderYao/p/4513548.html推送安装包
```
现在很多软件都可以替代域控而且管理功能都比域更加的全面比如说：IP-guard
（当之无愧的第一老牌），iMonitor（貌似这玩意有最近的pj版），威眼（UI漂亮适合新手上手的界面），52大佬的[神目监控](https://pan.xlmy.net/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/%E7%BB%B4%E6%8A%A4%E5%B7%A5%E5%85%B7/)也不错
单纯的巡检，病毒，软件，启动项管理推荐使用360企业版，或者火绒企业版。

#### 业务机器的管理
以下提供2种方案分别解决了少量业务与大量业务的后期管理。
一、集群化管理方案（大量产品业务）：VMware vCenter 或者Kubernetes（后者难度较高没有基础建议用前者）

二、传统分类网络管理（少量业务或物联网设备管理）：再软路由上绑定arp地址并备注。注：宽带叠加需要对端口进行wan分流和对应的wan口映射才能外部访问。

三、走devops生产线，一体化面板管理linux服务器与容器打包。推荐开源项目[Jpom](https://gitee.com/dromara/Jpom)
路由器与交换机的差异:

<table class="ke-zeroborder" style="width: 100%;" border="0" cellspacing="0" cellpadding="2"><tbody><tr><td>传输速度</td><td>路由器比交换机慢，同一网线上网相互影响</td><td>交换机比较路由器快，同一网线各自上网互不受影响</td></tr><tr><td>使用范围</td><td>路由器是必需的网络设备，在路由器无法全部连接电脑的情况下，再加交换机。</td><td>单独交换机无法实现上互联网功能，交换机在局域网中起到拓展的作用</td></tr><tr><td>网络地址</td><td>路由器可以把一个IP分配给很多个主机使用，但IP都是相同的</td><td>交换机可以多个主机连起来，主机对外各有各的IP，IP都不同</td></tr><tr><td>安全性能</td><td>路由器提供了防火墙的服务，路由器同时具有交换机的功能</td><td>交换机不具备此功能，交换机不具备路由功能</td></tr><tr><td>数据转发</td><td>以MAC地址来确定转发数据的目的地址，一般硬件自带</td><td>以不同网络的ID号来确定数据转发地址。IP地址由网络管理员或系统自动分配</td></tr><tr><td>购买价格</td><td>较高（因为部份路由器具备交换机功能）</td><td>高</td></tr></tbody></table>

企业带宽接入选择：

 <table class="ke-zeroborder" style="width: 100%;" border="0" cellspacing="0" cellpadding="2"><tbody><tr><td>接入方式</td><td>优点</td><td>缺点</td><td>使用范围</td></tr><tr><td>ADSL接入</td><td>带宽较大、连高速数据传输、接法简单、投资较小、覆盖面广</td><td>对线路质量要求较高，当线路质量不高时影响使用</td><td>家庭用户、中小企业用户、集中的用户接、分散的用户接入使用</td></tr><tr><td>VDSL接入</td><td>更快的互联网接入、具有LAN速率的安全LAN接入、低成本的办公应用、IP电话传递</td><td>传输速度与传输距离成反比，配线质量需相当好。且VDSL目前还没有一套统一标准，各家所制造的设备互不兼容</td><td>适用于酒店等服务行业或中小型企业使用</td></tr><tr><td>Home PNA接入</td><td>Home PNA传输速度快、收费低、共享上网、施工简单</td><td>虽然成本较低，但传输距离太短，长距离的传输仍然需要ADSL技术、VDSL技术等来实现</td><td>家庭电话线网络组建</td></tr><tr><td>MMDS接入</td><td>成本低廉、MMDS技术比较成熟，使用广泛</td><td>带宽有限，尤其在人口密集的地区，很多用户有可能共用同一无线信道，数据流量会低于其他宽带无线服务</td><td>适用于中小企业用户和集团用户及大、中城市个人用户使用</td></tr></tbody></table>

#### 常用dos命令
```cmd
nslookup -qt=txt ip dns（查询服务器的dns响应,-qt或者-type查看解析值）
CHCP 65001 #切换编码防止乱码
tracert  （检查路由情况一般10个以内为正常，10-15为较慢，30以上算作无法访问）
netstat -anoq | findstr pid（配合任务管理器分析本地软件流量动向带管道符可以筛选）-r是查看路由表
route -p add 192.168.1.0 mask 255.255.255.0 192.168.192.10（add添加一条静态路由指向 delete 是删除）
takeown /f 文件夹名称 /r （打开权限）
msconfig（查看系统配置）
systeminfo （查看系统信息）
netsh winsock reset （重置网卡）
sfc/scannow （修复系统）
arp (-a查看路由表，-d删除路由表缓存)
tracert server(查看ip跃点，到改ip经过了那些路由ip)
taskkill /F /IM PID /T (强制关闭进程树)
telnet server port （测试服务端口连通性）
netsh interface portproxy add v4tov4 listenport=80 listen address=192.168.154.129 connectport=9999 connectaddress=192.168.154.129 （把192的80端口转发到192的9999端口）
netsh interface portproxy show all  （显示系统中的转发规则列表）
netsh interface portproxy reset （清除所有当前的端口转发规则）
ping 192.168.*.255 然后使用arp -a （查看活跃的ip地址）
netdom query fsmo ##查询当前连的ad域
repadmin /replsum  #查看ad域整体状态
repadmin /syncall /APed ##同步到域
Move-ADDirectoryServerOperationMasterRole -Identity "DC-W2K16" -OperationMasterRole 0,1,2,3,4  ##域控转移 -force是强制
```


​    


系统修复命令
1.非损坏严重性修复

```bash
sfc /SCANNOW   ##扫描系统文件到日志文件
Dism /Online /Cleanup-Image /ScanHealth    #扫描全部系统文件和系统映像文件是否与官方版本一致
Dism /Online /Cleanup-Image /CheckHealth   #检查损害文件
DISM /Online /Cleanup-image /RestoreHealth  #联机下载并修复已损坏的系统文件

```

2.镜像损坏与其他情况需要先准备好与当前系统相对应的系统镜像文件，打开镜像文件将sources目录下的install.wim文件复制到C盘根目录下，在C盘根目录下新建一个文件夹命名为REP(可换目录)，用本地wim修复系统镜像

```bash
ATTRIB C:\install.wim -R & DISM.exe /Mount-Image /ImageFile:C:\install.wim /Index:1 /MountDir:C:\REP

```
修复过后卸载命令，然后以后修复可以直接使用第一种方法修复。
```bash
DISM.exe /Unmount-Image /MountDir:C:\REP /Discard

```



#### 电脑重装与维护
先推荐几个系统网

423精简镜像:[https://www.423down.com/win10]
iso系统镜像：[https://msdn.itellyou.cn/]
三方纯净gho:[http://www.aichunjing.com/]

1. pe推荐
    微PE——优启通——Edgeless PE——USBOS——FirPE——USM
    公司电脑比较老式推荐进2003pe，不然可能识别不到磁盘。装完系统需要安装许多常用的软件推荐使用it天空的软件安装助理，或者自己封装GHO包（正版化检查的公司不能用GHO喔）,如果涉及到安装服务器比较多的话推荐用[USBOS](http://www.aichunjing.com/soft/960.html)里面包含了许多整列卡驱动

2. win直装

3. ios软碟通启动直装或者使用Ventoy多iso文件启动而且不影响U盘的使用

4. 卡windows，拔外设进系统插上，bios重置；bios保存问题更换电池。

5. 防止软件意外退出简单防护

   ```bash
   Windows Registry Editor Version 5.00
   
   [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\RayLink.exe]
   "GlobalFlag"=dword:00000200
   
   [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\SilentProcessExit\RayLink.exe]
   "MonitorProcess"="RayLink.exe"
   "ReportingMode"=dword:00000001
   ```

   



#### 引导修复与活动分区激活
1. 分区激活进pe用diskgenius点主机硬盘重建主引导记录（MBR）、插U盘正常进系统管理-磁盘管理设置C活动分区

2. 继续使用pe引导修复工具，Dism++x86修复引导。微软命令修复如下

   ```cmd
   bcdboot 启动分区 /s 系统分区 /f 启动类型 /l 显示语言如果要修复如下MBR系统 
   bcdboot C:\Windows /s E: /f BIOS /l zh-CN   ##MBR
   bcdboot C:\Windows /s F: /f UEFI /l zh-CN   ##GPT
   ```

   

   ![](http://img.mp.itc.cn/upload/20170123/d4c99b29db1447ba8303f019fc84861c_th.jpg)

3. bios的基本配置

   


#### 优化系统
1. wisecare
2. explorer修复，taskkill重启
3. 微软常用库
4. wps绿色快速重装
5. 360全家桶懂电脑的用火绒5.0+自定义规则
6. 360管家提取版本
7. DiskGenius（磁盘管理神器，可恢复数据）
8. 本地网络问题可以用360急救箱+火绒断网修复一键修复



#### 驱动管理与常用硬件工具
1. 360驱动或驱动总裁（驱动总裁相对来说比较好）
2. usb宝盒
3. 寻线仪（2套）--精明鼠
4. 网线钳--宝工
5. 外设--绿联
6. U盘--MLC+3.0
7. 超5类网线与6类网线
8. 尼龙扎带+清洁套装
9. 信号检测仪--K18

#### windows服务器维护
1. iis内存优化处理：每天凌晨4点重启（at 04:00 /every:M,T,W,Th,F,S,Su cmd /c shutdown -r -t 60）
2. 数据库本地备份与云备份：	IPerrius Backup（包含了ftp，定时备份等实用功能，满足日常备份需求）
3. 企业级重要设施可用veritas backup exec ,windows server有server backup服务。


#### 电脑硬件维修方法
```
放电法
取出CMOS电池，短接电池插座的正负极
清洁法
这种方法一般用来解决因主板上灰尘太多，灰尘带静电造成主板无法正常工作的故障，可用毛刷清除主板上的灰尘。另外，主板上一般接有很多的外接板卡，这些板卡的金手指部分可能被氧化，造成与主板接触不良，这种问题可用橡皮擦擦去表面的氧化层。

观察法
主要用到“看、摸”的技巧。在关闭电源的情况下，看各部件是否接插正确，电容、电阻引脚是否接触良好，各部件表面是否有烧焦、开裂的现象，各个电路板上的铜箔是否有烧坏的痕迹。同时，可以用手去触摸一些芯片的表面，看是否有非常发烫的现象。

替换法
当对一些故障现象不能确定究竟是由哪个部件引起的时候，可以对怀疑的部件通过替换法来排除故障。可以把怀疑的部件拿到好的电脑上去试，同时也可以把好的部件接到出故障的电脑上去试。如：内存在自检时报错或容量不对，就可以用此方法来判断引起故障的真正元凶。

检测法
利用主板bios自检系统，用检测卡来来排除主板故障与检查磁盘坏道

```
![](https://img.alicdn.com/imgextra/i4/68727132/TB2_Y8jaV55V1Bjy0FnXXc5XFXa_!!68727132.jpg)

#### HEU KMS或者云萌
目前没有发现不能激活的win地址（如非永久激活可重复激活）： 
[HEU KMS系类](https://github.com/zbezj/HEU_KMS_Activator)
[云萌专注win激活](https://cmwtat.cloudmoe.com/cn.html)

####  音响设备设置
1. 默认声卡位置 C:\Program Files\Realtek\Audio\HDA 

2. 多转动usb音孔调节

3. 检查声卡驱动新的声卡驱动和主板自带的声卡模组包括英特尔的智音技术OED可能不兼容，会导致没有 Audio设备，这种情况需要检查Realtek Audio Universal Service与Intel(R) 集成驱动的版本或者尝试卸载，如果有还原点可以直接用还原点还原驱动配置(还原点的重要性！)。

   ![](https://s11.ax1x.com/2024/01/02/pijS30x.png)

#### 网刻批量重装系统GHO与pxe
主要是设置客户机的时候，ps：有条件可以直接出厂的时候就上增霸卡更加方便后期维护

（重启计算机进入BIOS设置，将第一启动项设置成从网络启动设即可）

把需要安装系统的多台客户机，接在与网刻服务器连接的交换机上，在BIOS中设置PXE网络启动。BIOS版本众多，设置各不相同，能不能设置就看你的技术了，还要看主板支不支持PXE启动。如果是10年前的主板，不支持是有可能的， iventoy对于新手非常容易上手批量装20台也错错有余了,喜欢命令行的可以参考[yuzly](https://www.cnblogs.com/yuzly/p/10582254.html)的博客。

至于服务器直接用厂家的如戴尔的OME再一个局域网连接好idrac线批量配置riad和管理就行，然后通过iventoy或者其他pxe推送安装包开机就可以了（自动化部署可以参考B站[记性不太好](https://www.bilibili.com/video/BV1Nr421t7wW/?spm_id_from=333.999.0.0&vd_source=5d57f1d5a07897badfa1853b48fb0529)的应答文件制作）这里是我个人工作制作的[windows server 2022自动化文件](https://pan.xlmy.net/%E7%8E%AF%E5%A2%83%E7%B1%BB/PXE%E8%A3%85%E6%9C%BA/%E8%87%AA%E5%8A%A8%E5%BA%94%E7%AD%94%E6%96%87%E4%BB%B6)可以参考,需要做测试的话再通过一些自动化运维软件如ansible这些批量分发脚本就行量少的话直接mobaxterm或者xshell批量终端执行也行反正哪种方便就哪么整。

常用学生或者普通环境的员工机器对账户唯一性要求不高的话用网刻工具再生龙clonezilla可以非常方便的完成任务，江南的newboom也还行但是我测试有很多bug后续版本应该会完善(被winbit完美替代yyds)，再生龙的具体的教程可以看油管[**ET Wang老師**](https://www.youtube.com/watch?v=7ntrncEliEA&list=PL98snzVO_LX6qiumQcDpy8NIAS4yWHMOl)的教程很简单。



#### **机房装系统避坑指南**

这一个章节笔者新加的，起因是上门给一些特殊要求的客户离线装软件以及机房空调太冷里面等的实在受不了找的一些解决方案。。至于企业通外网或者通端口可以用HDM远程连到控制台然后挂ISO，或者云kvm与直连这种宽裕的条件我这里就不在累述了。

**WiFi远程连接方案：**首先可以用无线网卡设备插入服务器(网卡一定要免驱不然Linux下不识别)，然后通过笔记本共享的WIFI连接(要上外网下依赖的话笔记本连接手机热点),如下图然后就可以通过xshell或者远程工具连到137.40这个服务器下管理了。ps:有些企业要求了对应网段与ip安装一些服务的时候记得提前和管理员商量好网段并记录下对应静态内网ip避免出现后续服务指向ip不正确的问题，下面所有组网方案同理。

![img](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/image-20240614155745825.png)

**有线连接方案：**这方案还是得呆冷机房是再没有网卡的情况下用的，离线环境下没有办法安装依赖Linux上又识别不到ntfs格式的U盘这个时候就可以通过有线连接组一个小型局域网来传输文件。笔记本网口接服务器网口，然后给双方网络配置器改为同一个网段下即可连通。

**无线网络桥接有线网络：**这个是因为上面方案组网过后没有办法上外网下依赖而用的使用iamjingong的教程。笔记本上通过wifi连到手机热点，

![img](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/20210804110739831.png)

然后去配置器界面打开网络共享

![img](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/20210804111131986.png)

 在“以太网”上右键选择“属性”，接着查看它的IPV4网络属性，默认一般都是137的网关192.168.137.1然后服务器通过网线和笔记本连到一起过后就可以通过设置静态ip137.1网关进行上网了。

![img](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/2021080411124177.png)

![img](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/20210804112028412.png)

**无线采集卡配合无线键鼠(有线配合网络传输kvm信号也行)：**需要提前准备好标题的2件工具然后插入服务器，而且注意大部分采集卡是HDMI的可能还需要准备一个转vga的设备条件允许尽量再带一个usb拓展坞，就可以在机房外靠着墙装机了,运气好的话机房旁边可能有工位(😭苦命的打工人）。没有设备的情况下可以使用采集卡+软KVM切换器 barrier 共享键鼠，再windoiws上当服务端共享键盘鼠标，Linux上用 snap install barrier或者apt yum都可以试试。

![image-20240624103642134](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/image-20240624103642134.png)

#### 3大厂家常用命令对比

为了方便与简化任务可以看看[网络设备生成工具](https://www.netconf.cloud/)感觉还是很方便的，偷懒的时候可以用用。

<table style="width: 100%" border="1" cellspacing="0" cellpadding="0"><tbody><tr class="firstRow"><td align="center" valign="middle">&nbsp;&nbsp; CISCO</td><td align="center" valign="middle">&nbsp;&nbsp; H3C</td><td align="center" valign="middle">&nbsp;&nbsp; HUAWEI</td><td align="center" valign="middle">&nbsp;&nbsp; 描述</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; no</td><td align="center" valign="middle">&nbsp;&nbsp; undo</td><td align="center" valign="middle">&nbsp;&nbsp; undo</td><td align="center" valign="middle">&nbsp;&nbsp; 取消、关闭当前设置</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show</td><td align="center" valign="middle">&nbsp;&nbsp; display</td><td align="center" valign="middle">&nbsp;&nbsp; display</td><td align="center" valign="middle">&nbsp;&nbsp; 显示查看</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; exit</td><td align="center" valign="middle">&nbsp;&nbsp; quit</td><td align="center" valign="middle">&nbsp;&nbsp; quit</td><td align="center" valign="middle">&nbsp;&nbsp; 退回上级</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; hostname</td><td align="center" valign="middle">&nbsp;&nbsp; sysname</td><td align="center" valign="middle">&nbsp;&nbsp; sysname</td><td align="center" valign="middle">&nbsp;&nbsp; 设置主机名</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; en, config terminal</td><td align="center" valign="middle">&nbsp;&nbsp; system-view</td><td align="center" valign="middle">&nbsp;&nbsp; system-view</td><td align="center" valign="middle">&nbsp;&nbsp; 进入全局模式</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; delete</td><td align="center" valign="middle">&nbsp;&nbsp; delete</td><td align="center" valign="middle">&nbsp;&nbsp; delete</td><td align="center" valign="middle">&nbsp;&nbsp; 删除文件</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; reload</td><td align="center" valign="middle">&nbsp;&nbsp; reboot</td><td align="center" valign="middle">&nbsp;&nbsp; reboot</td><td align="center" valign="middle">&nbsp;&nbsp; 重启</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; write</td><td align="center" valign="middle">&nbsp;&nbsp; save</td><td align="center" valign="middle">&nbsp;&nbsp; save</td><td align="center" valign="middle">&nbsp;&nbsp; 保存当前配置</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; username</td><td align="center" valign="middle">&nbsp;&nbsp; local-user</td><td align="center" valign="middle">&nbsp;&nbsp; local-user</td><td align="center" valign="middle">&nbsp;&nbsp; 创建用户</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; shutdown</td><td align="center" valign="middle">&nbsp;&nbsp; shutdown</td><td align="center" valign="middle">&nbsp;&nbsp; shutdown</td><td align="center" valign="middle">&nbsp;&nbsp; 禁止、关闭 端口</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show version</td><td align="center" valign="middle">&nbsp;&nbsp; display version</td><td align="center" valign="middle">&nbsp;&nbsp; display version</td><td align="center" valign="middle">&nbsp;&nbsp; 显示当前系统版本</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show startup-config</td><td align="center" valign="middle">&nbsp;&nbsp; display &nbsp;saved-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; display &nbsp;saved-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; 查看已保存过的配置</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show running-config</td><td align="center" valign="middle">&nbsp;&nbsp; display &nbsp;current-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; display &nbsp;current-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; 显示当前配置</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; no debug all</td><td align="center" valign="middle">&nbsp;&nbsp; ctrl+d</td><td align="center" valign="middle">&nbsp;&nbsp; ctrl+d</td><td align="center" valign="middle">&nbsp;&nbsp; 取消所有debug命令</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; erase startup-config</td><td align="center" valign="middle">&nbsp;&nbsp; reset saved-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; reset saved-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; 删除配置</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; end</td><td align="center" valign="middle">&nbsp;&nbsp; return</td><td align="center" valign="middle">&nbsp;&nbsp; return</td><td align="center" valign="middle">&nbsp;&nbsp; 退到用户视图</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; exit</td><td align="center" valign="middle">&nbsp;&nbsp; logout</td><td align="center" valign="middle">&nbsp;&nbsp; logout</td><td align="center" valign="middle">&nbsp;&nbsp; 登出</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; logging</td><td align="center" valign="middle">&nbsp;&nbsp; info-center</td><td align="center" valign="middle">&nbsp;&nbsp; info-center</td><td align="center" valign="middle">&nbsp;&nbsp; 指定信息中心配置信息</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; line</td><td align="center" valign="middle">&nbsp;&nbsp; user-interface</td><td align="center" valign="middle">&nbsp;&nbsp; user-interface</td><td align="center" valign="middle">&nbsp;&nbsp; 进入线路配置（用户接口）模式</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; start-config</td><td align="center" valign="middle">&nbsp;&nbsp; saved-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; saved-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; 启动配置</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; running-config</td><td align="center" valign="middle">&nbsp;&nbsp; current-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; current-configuration</td><td align="center" valign="middle">&nbsp;&nbsp; 当前配置</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; host</td><td align="center" valign="middle">&nbsp;&nbsp; ip host</td><td align="center" valign="middle">&nbsp;&nbsp; ip host</td><td align="center" valign="middle">&nbsp;&nbsp; host名字和ip地址对应</td></tr><tr><td colspan="4" align="center" valign="middle">&nbsp;&nbsp; 交换部分</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; enable password</td><td align="center" valign="middle">&nbsp;&nbsp; set authentication &nbsp;password simple</td><td align="center" valign="middle">&nbsp;&nbsp; set authentication &nbsp;password simple</td><td align="center" valign="middle">&nbsp;&nbsp; 配置明文密码</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; interface type/number</td><td align="center" valign="middle">&nbsp;&nbsp; interface type/number</td><td align="center" valign="middle">&nbsp;&nbsp; interface type/number</td><td align="center" valign="middle">&nbsp;&nbsp; 进入接口</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; interface vlan 1</td><td align="center" valign="middle">&nbsp;&nbsp; interface vlan 1</td><td align="center" valign="middle">&nbsp;&nbsp; interface vlan 1</td><td align="center" valign="middle">&nbsp;&nbsp; 进入vlan配置vlan管理地址</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; interface rang</td><td align="center" valign="middle">&nbsp;&nbsp; interface ethID to ID</td><td align="center" valign="middle">&nbsp;&nbsp; interface ethID to ID</td><td align="center" valign="middle">&nbsp;&nbsp; 定议多个端口的组</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; enabl esecret</td><td align="center" valign="middle">&nbsp;&nbsp; super password</td><td align="center" valign="middle">&nbsp;&nbsp; super password</td><td align="center" valign="middle">&nbsp;&nbsp; 设置特权口令</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; duplex (half|full|auto)</td><td align="center" valign="middle">&nbsp;&nbsp; duplex (half|full|auto)</td><td align="center" valign="middle">&nbsp;&nbsp; duplex (half|full|auto)</td><td align="center" valign="middle">&nbsp;&nbsp; 配置接口状态</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; speed (10/100/1000)</td><td align="center" valign="middle">&nbsp;&nbsp; speed (10/100/1000)</td><td align="center" valign="middle">&nbsp;&nbsp; speed (10/100/1000)</td><td align="center" valign="middle">&nbsp;&nbsp; 配置端口速率</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; switchport mode trunk</td><td align="center" valign="middle">&nbsp;&nbsp; port link-type trunk</td><td align="center" valign="middle">&nbsp;&nbsp; port link-type trunk</td><td align="center" valign="middle">&nbsp;&nbsp; 配置trunk</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; vlan ID /no vlan ID</td><td align="center" valign="middle">&nbsp;&nbsp; vlan batch ID /undo vlan batch ID</td><td align="center" valign="middle">&nbsp;&nbsp; vlan batch ID /undo vlan batch ID</td><td align="center" valign="middle">&nbsp;&nbsp; 添加、删除vlan</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; switchport access &nbsp;vlan</td><td align="center" valign="middle">&nbsp;&nbsp; port default vlan ID</td><td align="center" valign="middle">&nbsp;&nbsp; port acces vlan ID</td><td align="center" valign="middle">&nbsp;&nbsp; 将端口接入vlan</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show interface</td><td align="center" valign="middle">&nbsp;&nbsp; display interface</td><td align="center" valign="middle">&nbsp;&nbsp; display interface</td><td align="center" valign="middle">&nbsp;&nbsp; 查看接口</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show vlan ID</td><td align="center" valign="middle">&nbsp;&nbsp; display vlan ID</td><td align="center" valign="middle">&nbsp;&nbsp; display vlan ID</td><td align="center" valign="middle">&nbsp;&nbsp; 查看vlan</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; encapsulation</td><td align="center" valign="middle">&nbsp;&nbsp; link-protocol</td><td align="center" valign="middle">&nbsp;&nbsp; link-protocol</td><td align="center" valign="middle">&nbsp;&nbsp; 封装协议</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; channel-group 1 mode on</td><td align="center" valign="middle">&nbsp;&nbsp; port link-aggregation &nbsp;group 1</td><td align="center" valign="middle">&nbsp;&nbsp; port link-aggregation &nbsp;group 1</td><td align="center" valign="middle">&nbsp;&nbsp; 链路聚合</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; ip routing</td><td align="center" valign="middle">&nbsp;&nbsp; 默认开启</td><td align="center" valign="middle">&nbsp;&nbsp; 默认开启</td><td align="center" valign="middle">&nbsp;&nbsp; 开启三层交换的路由功能</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; no switchport</td><td align="center" valign="middle">&nbsp;&nbsp; 不支持</td><td align="center" valign="middle">&nbsp;&nbsp; 不支持</td><td align="center" valign="middle">&nbsp;&nbsp; 开启接口三层功能</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; vtp domain</td><td align="center" valign="middle">&nbsp;&nbsp; GVRP</td><td align="center" valign="middle">&nbsp;&nbsp; GVRP</td><td align="center" valign="middle">&nbsp;&nbsp; 对跨以太网交换机的VLAN进行动态注册和删除</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; spanning-tree vlan ID &nbsp;root primary</td><td align="center" valign="middle">&nbsp;&nbsp; stp instance id root primary</td><td align="center" valign="middle">&nbsp;&nbsp; stp instance id root primary</td><td align="center" valign="middle">&nbsp;&nbsp; stp配置根网桥</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; spanning-tree vlan ID &nbsp;priority</td><td align="center" valign="middle">&nbsp;&nbsp; stp primary vlaue</td><td align="center" valign="middle">&nbsp;&nbsp; stp primary vlaue</td><td align="center" valign="middle">&nbsp;&nbsp; 配置网桥优先级</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show spanning-tree</td><td align="center" valign="middle">&nbsp;&nbsp; dis stp brief</td><td align="center" valign="middle">&nbsp;&nbsp; dis stp brief</td><td align="center" valign="middle">&nbsp;&nbsp; 查看STP配置</td></tr><tr><td colspan="4" align="center" valign="middle">&nbsp;&nbsp; 路由部分</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; ip route 0.0.0.0 &nbsp;0.0.0.0</td><td align="center" valign="middle">&nbsp;&nbsp; ip route-static &nbsp;0.0.0.0 0.0.0.0</td><td align="center" valign="middle">&nbsp;&nbsp; ip route-static &nbsp;0.0.0.0 0.0.0.0</td><td align="center" valign="middle">&nbsp;&nbsp; 配置默认路由</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; ip route 目标网段+掩码 下一跳</td><td align="center" valign="middle">&nbsp;&nbsp; ip route-static 目标网段+掩码 下一跳</td><td align="center" valign="middle">&nbsp;&nbsp; ip route-static 目标网段+掩码 下一跳</td><td align="center" valign="middle">&nbsp;&nbsp; 配置静态路由</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show ip route</td><td align="center" valign="middle">&nbsp;&nbsp; display ip &nbsp;routing-table</td><td align="center" valign="middle">&nbsp;&nbsp; display ip &nbsp;routing-table</td><td align="center" valign="middle">&nbsp;&nbsp; 查看路由表</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; router rip /network 网段</td><td align="center" valign="middle">&nbsp;&nbsp; rip /network 网段</td><td align="center" valign="middle">&nbsp;&nbsp; rip /network 网段</td><td align="center" valign="middle">&nbsp;&nbsp; 启用rip、并宣告网段</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; router ospf</td><td align="center" valign="middle">&nbsp;&nbsp; ospf</td><td align="center" valign="middle">&nbsp;&nbsp; ospf</td><td align="center" valign="middle">&nbsp;&nbsp; 启用ospf</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; network ip 反码 area &lt;area-id&gt;</td><td align="center" valign="middle">&nbsp;&nbsp; area &nbsp;&lt;area-id&gt;</td><td align="center" valign="middle">&nbsp;&nbsp; area &nbsp;&lt;area-id&gt;</td><td align="center" valign="middle">&nbsp;&nbsp; 配置OSPF区域</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; no auto-summary</td><td align="center" valign="middle">&nbsp;&nbsp; rip split-horizon</td><td align="center" valign="middle">&nbsp;&nbsp; rip split-horizon</td><td align="center" valign="middle">&nbsp;&nbsp; 配置RIP V2水平分割</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; show ip protocol</td><td align="center" valign="middle">&nbsp;&nbsp; display ip protocol</td><td align="center" valign="middle">&nbsp;&nbsp; display ip protocol</td><td align="center" valign="middle">&nbsp;&nbsp; 查看路由协议</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; access-list 1-99 &nbsp;permit/deny IP</td><td align="center" valign="middle"><p>&nbsp;&nbsp; &nbsp; &nbsp; rule id permit source &nbsp;IP</p></td><td align="center" valign="middle">&nbsp;&nbsp; rule id permit source &nbsp;IP</td><td align="center" valign="middle">&nbsp;&nbsp; 标准访问控制列表</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; access-list 100-199 &nbsp;permit/deny protocol source IP+反码 &nbsp;destination IP+反码 operator operan</td><td align="center" valign="middle">&nbsp;&nbsp; rule &nbsp;{normal|special}{permit|deny}{tcp|udp}source {&lt;ip wild&gt;|any}destination &nbsp;&lt;ip wild&gt;|any}[operate]</td><td align="center" valign="middle">&nbsp;&nbsp; rule &nbsp;{normal|special}{permit|deny}{tcp|udp}source {&lt;ip wild&gt;|any}destination &nbsp;&lt;ip wild&gt;|any}[operate]</td><td align="center" valign="middle">&nbsp;&nbsp; 扩展访问控制列表</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; standby group-number &nbsp;ip virtual-ip</td><td align="center" valign="middle">&nbsp;&nbsp; vrrp vrid number &nbsp;virtual-ip</td><td align="center" valign="middle">&nbsp;&nbsp; vrrp vrid number &nbsp;virtual-ip</td><td align="center" valign="middle">&nbsp;&nbsp; 配置HSRP组</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; standby group-number &nbsp;priority</td><td align="center" valign="middle">&nbsp;&nbsp; vrrp vrid number &nbsp;priority</td><td align="center" valign="middle">&nbsp;&nbsp; vrrp vrid number &nbsp;priority</td><td align="center" valign="middle">&nbsp;&nbsp; 配置HSRP优先级</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; standby group-number &nbsp;preempt</td><td align="center" valign="middle">&nbsp;&nbsp; vrrp vrid number &nbsp;preempt-mode</td><td align="center" valign="middle">&nbsp;&nbsp; vrrp vrid number &nbsp;preempt-mode</td><td align="center" valign="middle">&nbsp;&nbsp; 配置HSRP占先权</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; standby group-number &nbsp;track</td><td align="center" valign="middle">&nbsp;</td><td align="center" valign="middle">&nbsp;</td><td align="center" valign="middle">&nbsp;&nbsp; 配置端口跟踪</td></tr><tr><td align="center" valign="middle">&nbsp;&nbsp; ip nat inside source &nbsp;static</td><td align="center" valign="middle">&nbsp;&nbsp; nat server global &nbsp;&lt;ip&gt; [port] inside &lt;ip&gt; port [protocol]</td><td align="center" valign="middle">&nbsp;&nbsp; nat server global &nbsp;&lt;ip&gt; [port] inside &lt;ip&gt; port [protocol]</td><td align="center" valign="middle">&nbsp;&nbsp; 配置静态地址转换</td></tr><tr><td align="center" valign="middle">&nbsp;</td><td align="center" valign="middle">&nbsp;</td><td align="center" valign="middle">&nbsp;</td><td align="center" valign="middle">&nbsp;</td></tr></tbody></table>
##### h3c三层交换机基础配置
```bash

system 
#分vlan
[H3C]vlan 14
[H3C]quit
[H3C]vlan 15
[H3C]quit
[H3C]vlan 16
[H3C]quit
#进入vlan并创建网关
[H3C]int vlan 14
[H3C-vlan14]ip add 192.168.14.1 255.255.255.0
[H3C]quit
[H3C]int vlan 15
[H3C-vlan15]ip add 192.168.15.1 255.255.255.0
[H3C]quit
[H3C]int vlan 16
[H3C-vlan16]ip add 192.168.16.1 255.255.255.0
[H3C]quit
#所有端口默认都属于vlan1需要分端口到指定vlan
[H3C]vlan 14
[H3C-vlan14]port GigabitEthernet 1/0/1 to GigabitEthernet 1/0/8
[H3C-vlan14]quit
[H3C]vlan 15
[H3C-vlan15]port GigabitEthernet 1/0/9 to GigabitEthernet 1/0/16
[H3C-vlan15]quit
[H3C]vlan 16
[H3C-vlan16]port GigabitEthernet 1/0/17 to GigabitEthernet 1/0/22
[H3C-vlan16]quit
#保留24流量汇入入口，把他配置到默认的vlan1中（交换路由）
dis vlan 1
int vlan 1 
ip add 192.168.1.2 255.255.255.0
quit
vlan 1
port GigabitEthernet 1/0/24
quit

#配置路由指向的一级路由器
ip route-static 0.0.0.0 0.0.0.0 192.168.1.1 
quit
save

#放行公共设施如vpn设备是23号端口
int e1/0/23 //进电口e，光口g
port link-type trunk //把23端口设为TRUNK端口 
port trunk permit vlan all //23端口为所有VLAN使用前面加undo是删除

##常用命令
显示交换机版本号
[H3C]dis version
显示全部VLAN配置信息
[H3C]dis vlan all
修改交换机名称
[H3C]sysname ehong
可以查看总的配置。
[H3C]Dis cu
显示有哪些vlan
[H3C]dis vlan
查看指定VLAN信息
[H3C]dis vlan 14
删除VLAN16
先删接口 如删除端口14
[H3C]vlan 16
[H3C-vlan16]undo port GigabitEthernet 1/0/4
[H3C-vlan16]quit
批量删除VLAN16端口
[H3C]vlan 16
[H3C-vlan16]undo port GigabitEthernet 1/0/4 to GigabitEthernet 1/0/16
[H3C-vlan16]quit
再删除配置接口(IP和子掩码)
[H3C]vlan 16
[H3C-vlan16]undo int vlan 16
[H3C-vlan16]quit
删除VLAN
[H3C]undo vlan 16
将交换机端口14加到Vlan 14
[H3C]int g1/0/14
[H3C-GigabitEthernet1/0/14]port access vlan 14
[H3C-GigabitEthernet1/0/14]quit
```
##### 华为三层交换机基本配置命令
```
<HW>system 

[HW]vlan 70  //新建vlan70 并进入

[HW-vlan70]quit 

[HW]vlan batch 80 90  //新建vlan 80 90 

[HW]interface vlanif 70  
[HW-vlanif]ip address 192.168.70.1  255.255.255.0 //配置交换机管理地址
[HW-vlanif]quit 

[HW]interface vlanif 80
[HW-vlanif]ip address 192.168.80.1  255.255.255.0 
[HW-vlanif]quit 

[HW]interface vlanif 90
[HW-vlanif]ip address 192.168.90.1  255.255.255.0 
[HW-vlanif]quit 


[HW]ip route-static 0.0.0.0  0.0.0.0  192.168.1.1 //配置交换机上级路由 


[HW]interface ethernet 0/0/1   //进入网口1 

##Access类型的端口只能属于1个VLAN，一般用于连接计算机的端口。
##Trunk类型的端口可以允许多个VLAN通过，可以接收和发送多个VLAN的报文，一般用于交换机之间连接的端口。
##Hybrid类型的端口可以允许多个VLAN通过，可以接收和发送多个VLAN的报文，可以用于交换机之间连接，也可以用于连接用户的计算机。
[HW-Eth0/0/1]port link-type access//将网口1定义为access口 

[HW-Eth0/0/1]port default vlan 80 //将vlan80加入网口1 

[HW-Eth0/0/1]quit 

[HW]port-group group    //新建端口组group 

[HW-group--group]group-m ethernet0/0/2 to eth 0/0/20  //将网口2到网口20加入端口组 

[HW-group-group]port link-type-access  //将端口组定义为access口 

[HW-group-group]port default vlan 90  //将vlan90加入该端口组 
 
[HW-group-group]quit 

[HW]interface ethernet 0/0/21  //进入网口21 

[HW-Eth0/0/21]port link-type trunk//将网口21定义为trunk口 

[HW-Eth0/0/21]port trunk allow-pass vlan 80 90//该端口仅允许vlan80 90通过 

[HW-Eth0/0/21]quit 

[HW]interface gigabitethernet 0/0/1  //进入光口1 

[HW-G0/0/1]port link-type trunk   //将光口1定义为trunk端口 

[HW-G0/0/1]port trunk allow-pass vlan 70 80 90   //该端口允许vlan70,338,440通过。 

[HW-G0/0/1]quit 

[HW]save  //保存

##常用命令
//查看vlan
display vlan 或者 dis vlan
//查看当前配置
display  current-configuration 或者 display cu
//查看已保存配置
display saved-configuration  或者  display sa
//查看版本
display version
```

#### 企业vpn建设(虚拟网卡支持)
1. openvpn或pptv，前者相对安全很多。先搭建再部署，部署可以再路由器上实现多家公司处于同一办公网络下。也可以在家通过vpn客户端进行连接办公。
2. 使用便捷的服务厂家如蒲公英，fcn等等。

#### 双机热备
先用一张图了解一下热备
![](https://img0.baidu.com/it/u=474338298,997419003&fm=253&fmt=auto&app=138&f=PNG?w=893&h=438)

windows部署双机热备可以采用ROSE或者免费的全球盾双机热备与ha4win,而linux是开源的，使用开源软件即可，因此部署windows双机热备要比linux部署双机热备成本要高很多。
#### 局域网故障
1. 自动修复工具ComIntRep
2. 手动修复dns缓存、dns地址、ip地址冲突、arp波动、winsock重置、mac过期
3. 巡线仪查线， 检查交换机运行情况
4. 合理利用ddns远程管理服务器管理
#### 资源站搭建
1. 局域网FTP
2. 工作组共享与开放共享，打印机的共享smb
3. 路由器搭建私有云或直接上NAS

#### U盘与内存卡修复
1. U盘量产网
2. SDFormatter
3. 数据恢复Magoshare Data Recovery

#### hyper-v与VMware异常修复

hyper-v：检查SCSI 控制器与虚拟机设置以及母盘文件夹的权限，切换虚拟盘与删除保存状态命令如下，如果还不行记得备份虚拟机然后删除重置配置文件。

```powershell
Remove-VMSavedState TestVM && Get-VMSnapshot TestVM | Remove-VMSavedState
Set-VHD "检查点.avhdx" -ParentPath "母盘.vhdx" –ignoreidmismatch
```

VMware：

1. 点击 打开虚拟机目录，删除以 .lck 结尾的文件。

2. .vmdk文件修复cd到[VM](https://so.csdn.net/so/search?q=VM&spm=1001.2101.3001.7020) ware workstation.exe的安装目录键入修复命令

   ```cmd
     vmware-vdiskmanager -R  "修复.vmdk文件的位置"
   ```

上述方法都没有办法修复就只有保数据，移动虚拟盘出来重新挂载到新系统取数据，可以启动虚拟机的情况就进pe取数据。

####  <font color=#00ffff size=40>网络层与应用层的拓展</font> 

空闲的电脑，加上公司的专线，上好的配置不利用起来有点浪费呢。上班业余时间当然要搞点事情玩，下面推荐几个企业中常用的web应用以及用途让你工作中有事半功倍的效果。以下推荐的下载地址请自行百度，

1.ikuai路由管理（硬件x86架构，内存硬盘1G以上）
功能强大的管理系统功能挺多的，可以自己搭建软路由或者刷bin固件，有条件可以直接上ikuai路由器。
软路由：首先将外网网线连接到独立网卡（因为ikuai系统会默认将Lan1绑定在eth0网卡上，而eth0网卡通常是主板集成的网卡即板载网卡），然后用另一根网线将PC机与路由器电脑相连，然后备用。
![](https://en.ikuai8.com/attached/php/upload/image/20181018/1539847351470869.png)



2.ManageEngine管理系列
AD域环境的搭建有些企业要求要用才使用，反正我们公司没使用用了反而更难管理而且ikuai路由后台也有一定的控制，而且本司工作中员工的自由需求很大，对于ad域控完全没有必要。回过头来这个ManageEngine旗下的管理软件：拥有网络监控、流量分析、日志分析、设备管理、事件管理、问题管理、变更管理、资产管理、域管理、等功能、简化IT管理。下面是常用产品的截图
ADManager（域管理，）
让员工入域是个难题，可通过半自动，用badusb挨着插电脑执行p处理或吧脚本上传到群让他们运行
![](http://seo-1255598498.file.myqcloud.com/full/b441d420d6c781a37a19b484b89c43810903aa74.jpg)
OpUtils8（网管日常管理）
![](https://s2.ax1x.com/2019/05/15/E7wHbD.md.png)
OpManager(网络结构管理)
![](https://s2.ax1x.com/2019/05/15/E7w481.md.png)
Servicedesk(企业资产与事件管理)
![](https://s2.ax1x.com/2019/05/15/E7DSHS.png)
3.Splunk
Splunk 是机器数据的引擎。使用 Splunk 可收集、索引和利用所有应用程序、服务器和设备生成的日志等信息并可视化数据完美的呈现给用户。 使用 Splunking 处理计算机数据，可让您在几分钟内解决问题和调查安全事件。
![](https://d1jnx9ba8s6j9r.cloudfront.net/blog/wp-content/uploads/2016/12/Splunk-features-Splunk-tutorial-Edureka-1.png)


4.T-Pot蜜罐
该平台需要满足硬件要求： T-Pot 安装需要至少4G 内存， 64G 磁盘空间， 并且联网。
官网提供了两种T-Pot的安装方式，这里默认在虚拟机环境安装。在物理机上安装类似。

    1、ISO镜像网络安装。直接丢进虚拟机即可。
    2、虚拟机安装好Ubuntu Server 18.04  后，运行官网提供的自动安装shell脚本即可。

 ```bash
https://github.com/dtag-dev-sec/tpotce
 ```
![](https://github.com/dtag-dev-sec/tpotce/blob/master/doc/kibana.png)
![](https://github.com/dtag-dev-sec/tpotce/raw/master/doc/architecture.png)

5.TeamView
突破防火墙，高速度高质量，TeamViewe>可以在工作、生活中帮到我们很多忙。秒杀向日葵不多说。
![](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1557585001812&di=4bdf32e05da9b342c84bed277e878d16&imgtype=0&src=http%3A%2F%2Fgss0.baidu.com%2F94o3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2Fcb8065380cd79123e7a85945af345982b2b780b3.jpg)
远程LAN环境教程（可以选择外设网络人，向日葵）：https://jingyan.baidu.com/article/9faa7231e7c98b473d28cb4c.html

6.海康威视后台管理（海康威视批量配置工具）
性价比挺高的有直观的后台可映射端口，一般般嘛现在还是比较完善了，加上还是很好部署的。
![](https://www.secpulse.com/upload/201408/08235435b2154aaba7d61f9b2a924c7a67a00d17.png)

7.Samba（局域网通信协议：打印机、文件共享）
Linux和UNIX系统上实现SMB协议的一个免费软件，（SMB）它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。
 ![1718612944767](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/1718612944767.jpg)
文件共享

```
yum  install  samba  //安装
smbpasswd  -a  user  //将user用户(用户可新建并设置权限)加入Samba的配置文件中，并为该用户设置密码
service  smb  start //启动
```
打印机共享详见：https://www.cnblogs.com/h2zZhou/p/5494988.html



8.cacti
这是一款使用PHP语言开的发性能与流量检测软件，检测对象可以是Linux、Windows服务器，也可以是路由交换机等网络设备，主要基于SNMP(simple、Network、Management、Protocol，简单网络管理协议)来搜集CPU占用、内存使用、运行进程、网卡流量等数据-----可使用CactiFans V1.0全自动ios文件安装
![](https://img-blog.csdn.net/20180112103844461)
![](https://img.cactifans.com/wp-content/uploads/2012/06/13-1024x701.png)



9.通达oa---OA系统搭建
![](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1558862509837&di=507b69c9f737e5336105acbfe08e8310&imgtype=0&src=http%3A%2F%2Fwww.tongda2000.com%2Foa%2FMYOA2015%2Ffree%2Fstyle%2Fimages%2Fslide%2FT-OS%2F2.jpg)
破解地址：https://www.52pojie.cn/thread-793033-1-1.html

10.AdGuard Home-搭建无广告和跟踪的公共DNS
主要还是针对与dns的保护，如果不打算使用VPN的DNS服务器，请确保配置您的网络使用安全的DNS服务，该服务为您提供DNS -over- HTTPS或DNS -over- TLS。连接是加密的，ISP就不会看到请求。根据您使用的是DoH还是DoT, ISP可能仍然能够看到您正在发出的DNS请求，但是内容将被加密且不可读通过AdGuard搭建并进行证书申请加密DNS就可以确保这个问题。一个安全的DNS对于某些企业来说很有必要。

#### 网络安全建设（介绍推荐的）
1.防火墙 （应用网络层 用于过滤IP和协议类型）

  防火墙产品有部分路由器自带规则，如爱快、360等，也可以单独进行购买如深信服、天融信、绿盟

2.WAF （Web应用 用于过滤web层的注入与恶意请求拦截）

云锁(服务器端安装过后，pc端与手机实时查看动态)
免费版本和安全狗对比个人感觉云锁强，支持windows/linux服务器跨平台实时、批量、远程安全管理。“业务资产管理 - 风险识别 - 安全防御 - 威胁感知 - 攻击事件回溯”的一体化安全防御体系。
![](http://help.yunsuo.com.cn/assets/installPC05.png)

3.IDS与IPS

以下是功能差异，并推荐2个产品。

![img](https://cdn.jsdelivr.net/gh/myxiaoshen/mypic/img/5bafa40f4bfbfbede9ce64026e76c33aaec31f4d.jpeg%40f_auto)

[流影->FlowShadow](https://abyssalfish-os.github.io/)

![img](https://abyssalfish-os.github.io/img/zong.png)

[OSSIM](https://www.alienvault.com/products/ossim)：开源安全信息管理系统，它是一个开源安全信息和事件的管理系统，集成了一系列的能够帮助管理员更好的进行计算机安全，入侵检测和预防的工具。

流量可视化管理工具可以上[IVRE](https://ivre.rocks/)



4.内网安全管理平台

semf（系统官网推荐centos7建设）
企业内网安全管理平台，包含资产管理，漏洞管理，账号管理，知识库管、安全扫描自动化功能模块，可用于企业内部的安全管理。 本平台旨在帮助安全人员少，业务线繁杂，周期巡检困难，自动化程度低的甲方，更好的实现企业内部的安全管理。可以通过官方API对接热门扫描器如wvs、nussus。
![](https://camo.githubusercontent.com/0c10358cd4d5b3c681fbb1b376c2ba847a627bba/68747470733a2f2f67697465652e636f6d2f75706c6f6164732f696d616765732f323031382f303532372f3131343032315f65663539316361335f313339303337382e706e67)

#### 流量行为管理

Panabit NTM使用全流回溯分析，假如之前发生了故障，可以快速溯源，定位是什么问题，定位到人。但最终的目的是解决问题，实现业务系统的稳定。

![](https://i.mji.rip/2023/07/18/321cf45a81892138a0d99dff11c56340.jpeg)



#### 公司杂项

万兴神剪手
因为公司原因有时候一些杂事网管免不了背锅（心中暗自嘀咕），对于一个做视频只有小学生功底的我来说是硬伤，但这款软件就很强大了提供了很多素材与表情包包括场景素材。可谓是初学者的福音，而且网上还有破解包喔还带额外大量材质。
![](https://attach.52pojie.cn/forum/201908/29/015703q2hihauuuhaazazh.jpg)
photoshop 插件

1. 雅点证照大师--证件照片
2. DR5--磨皮插件人物修饰
3. fontags--轻松搞定ps内字体问题
4. Topaz ReMask--动动鼠标快速抠图
5. 工笔画--画笔增强工具做水墨古风风格必备
6. 光束大师--后期一键打光自然光晕滤镜

协同表格信息录入可以用[雷鸟365](https://www.leiniao365.com/)设置单元格规则权限，让每个人只能编辑自己的行。

